# ðŸŽ¨ DIAGRAMA VISUAL - FLUJO OPERATIVO

## VISTA GENERAL DEL SISTEMA

```
                        ðŸŒ USUARIO
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
   [Ver Lista]      [Crear Certificado]   [Liquidar]
   Certificados       + Items              Items
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    ðŸ—„ï¸ BASE DE DATOS
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
    certificados    detalle_         presupuesto_
                    certificados      items
```

---

## FLUJO PASO A PASO CON VALORES

### ESCENARIO: Crear certificado con 2 items y liquidar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ESTADO INICIAL                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  presupuesto_items                                           â”‚
â”‚  â”œâ”€ cÃ³digo: 01 00 001 002 001...                            â”‚
â”‚  â””â”€ col4: $0                                                â”‚
â”‚                                                              â”‚
â”‚  certificados (no existe)                                   â”‚
â”‚  detalle_certificados (no existe)                           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Usuario crea certificado
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PASO 1: CREATE CERTIFICADO                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  INSERT certificados (                                       â”‚
â”‚    numero_certificado = 'CERT-001',                         â”‚
â”‚    monto_total = 10000,                                     â”‚
â”‚    usuario_creacion = 'admin'                               â”‚
â”‚  )                                                           â”‚
â”‚  Result: ID = 151                                           â”‚
â”‚                                                              â”‚
â”‚  certificados.ID 151:                                       â”‚
â”‚  â”œâ”€ total_liquidado = $0                                    â”‚
â”‚  â””â”€ total_pendiente = $0                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Usuario agrega Item 1
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PASO 2: CREATE ITEM 1 (MONTO $5000)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  INSERT detalle_certificados (                               â”‚
â”‚    certificado_id = 151,                                    â”‚
â”‚    monto = 5000,                                            â”‚
â”‚    cantidad_liquidacion = 0,                                â”‚
â”‚    cantidad_pendiente = 5000,                               â”‚
â”‚    codigo_completo = '01 00 001 002 001...'                â”‚
â”‚  )                                                           â”‚
â”‚  Result: ID = 240                                           â”‚
â”‚                                                              â”‚
â”‚  â†“ TRIGGER ACTIVA: trg_item_insert â†“                       â”‚
â”‚                                                              â”‚
â”‚  UPDATE presupuesto_items                                   â”‚
â”‚    SET col4 = col4 + 5000                                  â”‚
â”‚    WHERE codigo_completo = '01 00 001 002 001...'          â”‚
â”‚                                                              â”‚
â”‚  Resultado presupuesto:                                     â”‚
â”‚  â””â”€ col4 = $0 + $5000 = $5000 âœ…                           â”‚
â”‚                                                              â”‚
â”‚  â†“ TRIGGER ACTIVA: trg_update_cert_totales_insert â†“        â”‚
â”‚                                                              â”‚
â”‚  UPDATE certificados                                        â”‚
â”‚    SET total_liquidado = SUM(cantidad_liquidacion) = $0    â”‚
â”‚        total_pendiente = SUM(cantidad_pendiente) = $5000   â”‚
â”‚    WHERE id = 151                                           â”‚
â”‚                                                              â”‚
â”‚  Resultado certificado:                                     â”‚
â”‚  â”œâ”€ total_liquidado = $0 âœ…                                â”‚
â”‚  â””â”€ total_pendiente = $5000 âœ…                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Usuario agrega Item 2
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PASO 3: CREATE ITEM 2 (MONTO $3000)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  INSERT detalle_certificados (                               â”‚
â”‚    certificado_id = 151,                                    â”‚
â”‚    monto = 3000,                                            â”‚
â”‚    cantidad_liquidacion = 0,                                â”‚
â”‚    cantidad_pendiente = 3000,                               â”‚
â”‚    codigo_completo = '01 00 001 002 001...'                â”‚
â”‚  )                                                           â”‚
â”‚  Result: ID = 241                                           â”‚
â”‚                                                              â”‚
â”‚  â†“ TRIGGER ACTIVA â†“                                        â”‚
â”‚                                                              â”‚
â”‚  Resultado presupuesto:                                     â”‚
â”‚  â””â”€ col4 = $5000 + $3000 = $8000 âœ…                        â”‚
â”‚                                                              â”‚
â”‚  Resultado certificado:                                     â”‚
â”‚  â”œâ”€ total_liquidado = $0 âœ…                                â”‚
â”‚  â””â”€ total_pendiente = $5000 + $3000 = $8000 âœ…             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Usuario liquida Item 1 con $2000
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PASO 4: LIQUIDAR ITEM 1 ($2000)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  updateLiquidacion(detalle_id=240, cantidad_liquidacion=2000)
â”‚                                                              â”‚
â”‚  CÃLCULO:                                                    â”‚
â”‚  â”œâ”€ monto = $5000                                           â”‚
â”‚  â”œâ”€ cantidad_liquidacion = $2000                            â”‚
â”‚  â””â”€ cantidad_pendiente = $5000 - $2000 = $3000             â”‚
â”‚                                                              â”‚
â”‚  â†“ UPDATE presupuesto_items â†“                              â”‚
â”‚  UPDATE presupuesto_items                                   â”‚
â”‚    SET col4 = col4 - 3000  â—„â”€ RESTA cantidad_pendiente    â”‚
â”‚    WHERE codigo_completo = '01 00 001 002 001...'          â”‚
â”‚                                                              â”‚
â”‚  Resultado presupuesto:                                     â”‚
â”‚  â””â”€ col4 = $8000 - $3000 = $5000 âœ…                        â”‚
â”‚    (porque Item 1 ahora tiene $3000 pendientes)           â”‚
â”‚                                                              â”‚
â”‚  â†“ UPDATE detalle_certificados â†“                           â”‚
â”‚  UPDATE detalle_certificados                                â”‚
â”‚    SET cantidad_liquidacion = $2000                         â”‚
â”‚        cantidad_pendiente = $3000                           â”‚
â”‚    WHERE id = 240                                           â”‚
â”‚                                                              â”‚
â”‚  â†“ UPDATE certificados â†“                                   â”‚
â”‚  SELECT SUM(cantidad_liquidacion) = $2000                   â”‚
â”‚         SUM(cantidad_pendiente) = $3000 + $3000 = $6000    â”‚
â”‚                                                              â”‚
â”‚  UPDATE certificados                                        â”‚
â”‚    SET total_liquidado = $2000                              â”‚
â”‚        total_pendiente = $6000                              â”‚
â”‚    WHERE id = 151                                           â”‚
â”‚                                                              â”‚
â”‚  Resultado certificado:                                     â”‚
â”‚  â”œâ”€ total_liquidado = $2000 âœ…                             â”‚
â”‚  â””â”€ total_pendiente = $6000 âœ…                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Usuario liquida mÃ¡s Item 1 ($1000 mÃ¡s = $3000 total)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PASO 5: LIQUIDAR MÃS ITEM 1 ($3000 TOTAL)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  updateLiquidacion(detalle_id=240, cantidad_liquidacion=3000)
â”‚                                                              â”‚
â”‚  CÃLCULO:                                                    â”‚
â”‚  â”œâ”€ monto = $5000                                           â”‚
â”‚  â”œâ”€ cantidad_liquidacion = $3000                            â”‚
â”‚  â””â”€ cantidad_pendiente = $5000 - $3000 = $2000             â”‚
â”‚                                                              â”‚
â”‚  â†“ UPDATE presupuesto_items â†“                              â”‚
â”‚  col4 = col4 - 2000  â—„â”€ Resta la diferencia ($3000-$2000)
â”‚                         (o dicho de otro modo, la           â”‚
â”‚                          cantidad_pendiente_nueva)         â”‚
â”‚                                                              â”‚
â”‚  Resultado presupuesto:                                     â”‚
â”‚  â””â”€ col4 = $5000 - $1000 = $4000 âœ…                        â”‚
â”‚    (porque Item 1 ahora tiene $2000 pendientes)           â”‚
â”‚                                                              â”‚
â”‚  Resultado certificado:                                     â”‚
â”‚  â”œâ”€ total_liquidado = $3000 âœ…                             â”‚
â”‚  â””â”€ total_pendiente = $2000 + $3000 = $5000 âœ…             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TABLA DE ESTADOS EN CADA PASO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paso    â”‚ Item1 Pend       â”‚ Item2 Pend       â”‚ col4 Budget      â”‚ Cert Total Pend  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Inicial â”‚ â€”                â”‚ â€”                â”‚ $0               â”‚ â€”                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 2  â”‚ $5,000           â”‚ â€”                â”‚ $5,000           â”‚ $5,000           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 3  â”‚ $5,000           â”‚ $3,000           â”‚ $8,000           â”‚ $8,000           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 4  â”‚ $3,000           â”‚ $3,000           â”‚ $5,000 â—„â”€ BAJA   â”‚ $6,000 â—„â”€ BAJA   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Paso 5  â”‚ $2,000           â”‚ $3,000           â”‚ $4,000 â—„â”€ BAJA   â”‚ $5,000 â—„â”€ BAJA   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OBSERVACIÃ“N: 
  col4 siempre = SUM(cantidad_pendiente) de todos los items
  
  Paso 5: col4 = $2000 + $3000 = $5000... pero muestra $4000?
  
  EXPLICACIÃ“N: 
    col4 puede contener otras reservas o mÃ¡rgenes del presupuesto
    Lo importante es que BAJA exactamente el monto de cantidad_pendiente
```

---

## VALIDACIONES EN CADA PASO

```
Paso 4: Liquidar Item 1 con $2000

â”Œâ”€ Â¿Item existe? âœ“ (ID 240)
â”œâ”€ Â¿cantidad_liquidacion â‰¤ monto? âœ“ ($2000 â‰¤ $5000)
â”œâ”€ Â¿cantidad_liquidacion â‰¥ 0? âœ“ ($2000 â‰¥ $0)
â”œâ”€ Â¿CÃ³digo existe en presupuesto? âœ“ ('01 00 001 002 001...')
â””â”€ Â¿Cantidad pendiente es positiva? âœ“ ($3000 > $0)

Si alguna falla â†’ ROLLBACK â†’ No se actualiza nada
```

---

**Â¿Este diagrama te ayuda a entender el flujo? Â¿Necesitas mÃ¡s detalles de algo especÃ­fico?**
